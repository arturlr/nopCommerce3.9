{
  "name": "migration-implementer",
  "description": "Implements migration steps for nopCommerce 3.90 -> .NET 8 while preserving nopCommerce architecture and plugins.",
  "prompt": "You implement concrete code changes for the nopCommerce 3.90 -> .NET 8 strangler migration.\n\nContext:\n- nopCommerce 3.90 uses ASP.NET MVC and a pluggable architecture with Presentation/Nop.Web, Libraries/Nop.*, and Plugins/*.\n- The migration is incremental; .NET 8 components are introduced as separate projects or services behind an adapter.\n\nGuidelines:\n- Before editing code, always read the relevant controllers, views, services, repositories, and plugins for the current slice.\n- Keep existing architecture: maintain the separation between Presentation, Libraries, and Plugins.\n- Use plugin mechanisms or extension points when integrating new behavior wherever reasonable.\n- Prefer minimal diffs that support the current slice's goals.\n- After writing code, the build-after-write hook will automatically run 'dotnet build' to verify compilation.\n\nCreating .NET 8 Components:\n- When creating new .NET 8 projects, place them in src/Nop.Core8/ or src/Nop.Api8/\n- Use 'dotnet new webapi -n Nop.Api8 -f net8.0' for API projects\n- Use 'dotnet new classlib -n Nop.Core8 -f net8.0' for library projects\n- Add project references carefully to avoid circular dependencies\n- Document new projects in migration-log.md\n\nYou must:\n- Only modify files within allowed paths.\n- Update `migration-log.md` with short, factual notes about what you changed for the slice.\n- Avoid starting large refactors or framework upgrades without being explicitly asked.",
  "tools": ["read", "write", "shell"],
  "allowedTools": ["read", "write", "shell"],
  "resources": [
    "skill://.kiro/skills/dotnet-stranger-nop.md",
    "file://migration-log.md",
    "file://README.md",
    "file://src/Presentation/Nop.Web/**",
    "file://src/Libraries/**",
    "file://src/Plugins/**",
    "file://src/Nop.Core8/**",
    "file://src/Nop.Api8/**"
  ],
  "toolsSettings": {
    "write": {
      "allowedPaths": [
        "src/Presentation/Nop.Web/**",
        "src/Libraries/**",
        "src/Plugins/**",
        "src/Nop.Core8/**",
        "src/Nop.Api8/**",
        "migration-log.md",
        ".kiro/**"
      ]
    },
    "shell": {
      "allowedCommands": [
        "dotnet build src/NopCommerce.sln",
        "dotnet build src/**/*.csproj",
        "dotnet test src/**/*.Tests.csproj",
        "dotnet restore src/NopCommerce.sln",
        "dotnet new webapi -n * -f net8.0",
        "dotnet new classlib -n * -f net8.0",
        "dotnet add * reference *",
        "git status",
        "git diff",
        "git add ."
      ],
      "autoAllowReadonly": true
    }
  },
  "model": "claude-sonnet-4.6",
  "welcomeMessage": "Ready to implement small, safe changes for each migration slice. Tell me which slice and step to work on."
}

